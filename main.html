<html>
<head>
<base href="https://thesenseai.fun">
<title>SenseAI</title>
<style>
:root {
  --primary: #10B981;
  --secondary: #047857;
  --background: #111827;
  --card: #1F2937;
  --text: #F9FAFB;
  --accent: #8B5CF6;
}

body {
  font-family: 'Inter', sans-serif;
  background-color: var(--background);
  color: var(--text);
  min-height: 100vh;
  background-image: 
    radial-gradient(at 40% 20%, hsla(128,100%,74%,0.1) 0px, transparent 50%),
    radial-gradient(at 80% 0%, hsla(189,100%,56%,0.1) 0px, transparent 50%),
    radial-gradient(at 0% 50%, hsla(355,100%,93%,0.1) 0px, transparent 50%);
  background-attachment: fixed;
  margin: 0;
  padding: 20px;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

.header {
  text-align: center;
  margin-bottom: 40px;
}

.header h1 {
  font-size: 3.5rem;
  font-weight: 800;
  background: linear-gradient(to right, var(--primary), var(--accent));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 20px;
}

.input-section {
  background: rgba(31, 41, 55, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  margin-bottom: 30px;
}

.input-group {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.input-group input {
  flex: 1;
  padding: 15px;
  background: rgba(17, 24, 39, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--text);
  transition: all 0.3s ease;
  border-radius: 8px;
  font-size: 1rem;
}

.input-group input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
  outline: none;
}

button {
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: white;
  border: none;
  padding: 15px 30px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
  letter-spacing: 0.5px;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.results {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

.card {
  background: rgba(31, 41, 55, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: transform 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.metric {
  display: flex;
  justify-content: space-between;
  margin-bottom: 15px;
  padding: 10px;
  background: rgba(17, 24, 39, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  transition: all 0.3s ease;
}

.metric:hover {
  background: rgba(17, 24, 39, 0.8);
  border-color: var(--primary);
}

.header-buttons {
  display: flex;
  gap: 15px;
  justify-content: center;
  margin-top: 20px;
}

.header-button {
  background: rgba(31, 41, 55, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 12px 24px;
  border-radius: 8px;
  color: var(--text);
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-button:hover {
  background: rgba(31, 41, 55, 0.9);
  border-color: var(--primary);
  transform: translateY(-2px);
}

.header-button svg {
  width: 20px;
  height: 20px;
}
.logo-container {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

.header-logo {
    width: 200px; /* Adjust size as needed */
    height: auto;
    margin-bottom: 10px;
    filter: drop-shadow(0 0 10px rgba(16, 185, 129, 0.3)); /* Optional: adds a glow effect */
    transition: transform 0.3s ease;
}

.header-logo:hover {
    transform: scale(1.05); /* Optional: adds a hover effect */
}

.recent-token-card {
  background: rgba(31, 41, 55, 0.7);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
  cursor: pointer;
  margin-bottom: 20px;
}

.recent-token-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  border-color: var(--primary);
}

.recent-token-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}


.recent-token-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 10px;
  margin-bottom: 15px;
}

.quick-metric {
  background: rgba(17, 24, 39, 0.6);
  padding: 8px;
  border-radius: 6px;
  font-size: 0.9rem;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.ai-analysis-section {
    margin-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 15px;
}

.analyze-button {
    width: 100%;
    margin-bottom: 10px;
}

.ai-result {
    background: rgba(17, 24, 39, 0.6);
    padding: 15px;
    border-radius: 8px;
    margin-top: 10px;
}
</style>
<script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
</head>
<body>
<div class="container">
  <div class="header">
      <div class="logo-container">
    <img src="https://thesenseai.fun/remove2.png" alt="Sense AI" class="header-logo">
</div>
    <h1>SenseAI</h1>
    <p>Enter a token Contract Address or Pump.fun link to analyze all its metrics and get AI-powered insights</p>
    <div class="header-buttons">
      <a href="https://github.com/TheSenseAI/SenseAI" class="header-button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
        </svg>
        Github Code
      </a>
      <a href="https://pump.fun/" class="header-button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        Buy Token
      </a>
      <a href="https://x.com/senseaix" class="header-button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
        </svg>
        Twitter
      </a>
      <a href="/api.html" class="header-button">
    API Docs
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
    </svg>
</a>
<a href="/whitepaper" class="header-button">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253M7.5 4.5v4m0 0h4m-4 0l4-4m0 0L8 7"/>
    </svg>
    Whitepaper
</a>
    </div>
  </div>

  <div class="input-section">
    <div class="input-group">
      <input type="text" id="contractInput" placeholder="Enter contract address or link">
      <button onclick="analyzeToken()">Analyze</button>
    </div>
  </div>

  <div class="recent-tokens" id="recentTokens">
    <h2>Recently Created Tokens</h2>
  </div>
</div>

<script>
window.addEventListener('DOMContentLoaded', loadRecentTokens);

let lastSeenMints = [];

async function getAIAnalysis(tokenData) {
    const OPENROUTER_API_KEY = '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';
    
    try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
            method: "POST",
            headers: {
                "Authorization": `Bearer ${OPENROUTER_API_KEY}`,
                "HTTP-Referer": "example.com",
                "X-Title": "xample",
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                "model": "openai/gpt-3.5-turbo",
                "messages": [{
                    "role": "user",
                    "content": `Analyze this Solana token with these metrics:
                        Name: ${tokenData.name}
                        Symbol: ${tokenData.symbol}
                        Market Cap: ${tokenData.marketCap}
                        Created: ${tokenData.createdAt}
                        Replies: ${tokenData.replies}
                        
                        Provide a brief analysis of:
                        1. Token potential
                        2. Market analysis beeing ai Hyped
                        3. Community engagement based on replies 0 is not good 1 is good
                        4. Meme Potential
                        5. Current Market Trend Potential of AI/Agent Meta`
                }]
            })
        });

        const data = await response.json();
        return data.choices[0].message.content;
    } catch (error) {
        return "Error generating AI analysis";
    }
}

async function loadRecentTokens() {
    try {
        const response = await fetch('./fetch_tokens.php');
        const token = await response.json();
        
        if (!lastSeenMints.includes(token.mint)) {
            lastSeenMints.unshift(token.mint);
            
            if (lastSeenMints.length > 3) {
                lastSeenMints.pop();
            }
            
            const tokenHTML = `
                <div class="recent-token-card">
                    <div class="recent-token-header">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            ${token.image ? `<img src="${token.image}" alt="${token.name}" style="width: 40px; height: 40px; border-radius: 50%;">` : ''}
                            <h3>${token.name} (${token.symbol})</h3>
                        </div>
                        <span>Created: ${token.createdAt}</span>
                    </div>
                    <div class="recent-token-metrics">
                        <div class="quick-metric">
                            <strong>Market Cap:</strong> ${token.marketCap}
                        </div>
                        <div class="quick-metric">
                            <strong>Ticker:</strong> ${token.ticker}
                        </div>
                        <div class="quick-metric">
                            <strong>Replies:</strong> ${token.replies}
                        </div>
                    </div>
                    <div class="ai-analysis-section" id="analysis-${token.mint}">
                        <button onclick="openAnalysis('${token.mint}', event)" class="analyze-button">
                            Analyze Token
                        </button>
                    </div>
                </div>
            `;
            
            const recentTokensContainer = document.getElementById('recentTokens');
            let currentContent = recentTokensContainer.innerHTML;
            
            if (!currentContent.includes('recent-token-card')) {
                recentTokensContainer.innerHTML = `<h2>Latest Created Tokens</h2>${tokenHTML}`;
            } else {
                const titleEnd = currentContent.indexOf('</h2>') + 5;
                recentTokensContainer.innerHTML = 
                    currentContent.slice(0, titleEnd) + 
                    tokenHTML + 
                    currentContent.slice(titleEnd);
                
                const tokens = recentTokensContainer.getElementsByClassName('recent-token-card');
                while (tokens.length > 3) {
                    tokens[tokens.length - 1].remove();
                }
            }
        }
    } catch (error) {
        console.error('Error fetching token data:', error);
        document.getElementById('recentTokens').innerHTML = `
            <h2>Latest Created Tokens</h2>
            <div class="error-message">Error loading token data. Please try again later.</div>
        `;
    }
}

// Add this new function to handle the analysis button click
function openAnalysis(mint, event) {
    event.stopPropagation(); // Prevent any parent click events
    window.location.href = `analysis.html?mint=${mint}`;
}

// Also update the main analyze button function
async function analyzeToken() {
    const input = document.getElementById('contractInput').value;
    if (!input) {
        alert('Please enter a contract address or link');
        return;
    }

    // Extract mint address from input
    let mintAddress;
    if (input.includes('pump.fun/coin/')) {
        mintAddress = input.split('pump.fun/coin/')[1];
    } else {
        mintAddress = input;
    }

    // Clean up any trailing slashes or spaces
    mintAddress = mintAddress.trim().replace(/\/$/, '');

    // Redirect to analysis page
    window.location.href = `analysis.html?mint=${mintAddress}`;
}

loadRecentTokens();
setInterval(loadRecentTokens, 1000);
</script>
</body>
</html>